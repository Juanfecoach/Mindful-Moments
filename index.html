<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindful Moments - Reflexiones Diarias</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50">
    <div id="app" class="p-4">
        <div class="max-w-md mx-auto">
            <!-- Header -->
            <div class="text-center mb-8 mt-6">
                <div class="inline-block p-4 bg-white rounded-full shadow-lg mb-4">
                    <svg class="w-12 h-12 text-rose-500" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                    </svg>
                </div>
                <h1 class="text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2">
                    Mindful Moments
                </h1>
                <p class="text-gray-600 text-sm">Reflexiones diarias para tu bienestar</p>
            </div>

            <!-- Enable Notifications -->
            <div id="enableSection" class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                <div class="text-center">
                    <svg class="w-12 h-12 text-purple-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                    </svg>
                    <h2 class="text-xl font-semibold mb-2">Activa tus recordatorios</h2>
                    <p class="text-gray-600 text-sm mb-4">
                        RecibirÃ¡s 4 notificaciones diarias en horarios aleatorios para reflexionar y conectar contigo mismo/a
                    </p>
                    <button onclick="activateNotifications()" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 px-6 rounded-xl font-semibold hover:from-purple-600 hover:to-pink-600 transition-all transform hover:scale-105 shadow-lg">
                        Activar Recordatorios
                    </button>
                </div>
            </div>

            <!-- Today's Schedule -->
            <div id="scheduleSection" class="bg-white rounded-2xl shadow-lg p-6 mb-6 hidden">
                <div class="flex items-center gap-2 mb-4">
                    <svg class="w-5 h-5 text-purple-500" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M5 3a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2H5zm7 2l4.95 7.5L12 20l-4.95-7.5L12 5z"/>
                    </svg>
                    <h2 class="text-lg font-semibold">Horarios de hoy</h2>
                </div>
                <div id="scheduleList" class="space-y-3"></div>
            </div>

            <!-- Current Question -->
            <div id="questionSection" class="bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl shadow-2xl p-6 mb-6 text-white hidden">
                <div class="text-center">
                    <svg class="w-10 h-10 mx-auto mb-4 opacity-90" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M5 3a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2H5zm7 2l4.95 7.5L12 20l-4.95-7.5L12 5z"/>
                    </svg>
                    <h3 class="text-lg font-semibold mb-3">Momento de ReflexiÃ³n</h3>
                    <p id="currentQuestion" class="text-lg leading-relaxed"></p>
                </div>
            </div>

            <!-- Test Button -->
            <div id="testSection" class="bg-white rounded-2xl shadow-lg p-6 mb-6 hidden">
                <button onclick="testNotification()" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-6 rounded-xl font-medium transition-all">
                    Probar notificaciÃ³n
                </button>
            </div>

            <!-- Info Section -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <h3 class="text-lg font-semibold mb-3 flex items-center gap-2">
                    <svg class="w-5 h-5 text-rose-500" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                    </svg>
                    Â¿CÃ³mo funciona?
                </h3>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li class="flex gap-2">
                        <span class="text-purple-500">âœ“</span>
                        <span>4 notificaciones diarias en horarios aleatorios</span>
                    </li>
                    <li class="flex gap-2">
                        <span class="text-purple-500">âœ“</span>
                        <span>Preguntas diseÃ±adas para cada momento del dÃ­a</span>
                    </li>
                    <li class="flex gap-2">
                        <span class="text-purple-500">âœ“</span>
                        <span>Completamente gratis y fÃ¡cil de compartir</span>
                    </li>
                    <li class="flex gap-2">
                        <span class="text-purple-500">âœ“</span>
                        <span>Nuevos horarios cada dÃ­a para mantener la frescura</span>
                    </li>
                </ul>
            </div>

            <!-- Footer -->
            <div class="text-center mt-8 mb-4">
                <p class="text-xs text-gray-500">
                    Hecho con ðŸ’œ para tu bienestar emocional
                </p>
            </div>
        </div>
    </div>

    <script>
        const questions = {
            morning: [
                "Â¿CuÃ¡l ha sido tu primer pensamiento al despertar?",
                "Â¿QuÃ© intenciÃ³n quieres poner en este nuevo dÃ­a?",
                "Â¿CÃ³mo te sientes fÃ­sica y emocionalmente esta maÃ±ana?",
                "Â¿QuÃ© esperas aprender o descubrir hoy?",
                "Â¿QuÃ© puede hacer hoy tu yo del futuro agradecer?"
            ],
            midday: [
                "Â¿QuÃ© quisieras hacer mejor hoy? Â¿CuÃ¡les son los pasos para lograrlo?",
                "Â¿CÃ³mo ha sido tu maÃ±ana? Â¿QuÃ© ajustes necesitas hacer?",
                "Â¿EstÃ¡s siendo amable contigo mismo/a en este momento?",
                "Â¿QuÃ© pequeÃ±o logro has tenido hasta ahora?",
                "Â¿Necesitas hacer una pausa y respirar profundo?"
            ],
            afternoon: [
                "Â¿CuÃ¡les emociones llevo en este momento y cÃ³mo las gestionarÃ©?",
                "Â¿QuÃ© ha sido lo mÃ¡s significativo de tu dÃ­a hasta ahora?",
                "Â¿Hay algo que necesites soltar antes de que termine el dÃ­a?",
                "Â¿CÃ³mo puedes hacer de las prÃ³ximas horas algo especial?",
                "Â¿QuÃ© conversaciÃ³n pendiente te gustarÃ­a tener?"
            ],
            night: [
                "Piensa en tres cosas por las cuales te sientes agradecido antes de dormir",
                "Â¿QuÃ© aprendiste sobre ti mismo/a hoy?",
                "Â¿QuÃ© momento del dÃ­a te gustarÃ­a recordar?",
                "Â¿CÃ³mo puedes prepararte para un mejor descanso esta noche?",
                "Â¿QuÃ© te gustarÃ­a dejar ir antes de dormir?"
            ]
        };

        const timeRanges = {
            morning: { start: 6, end: 9 },
            midday: { start: 11, end: 13 },
            afternoon: { start: 15, end: 18 },
            night: { start: 20, end: 22 }
        };

        let notificationsEnabled = false;
        let dailySchedule = [];

        function getRandomTime(start, end) {
            const hour = Math.floor(Math.random() * (end - start + 1)) + start;
            const minute = Math.floor(Math.random() * 60);
            return { hour, minute };
        }

        function getRandomQuestion(timeOfDay) {
            const questionList = questions[timeOfDay];
            return questionList[Math.floor(Math.random() * questionList.length)];
        }

        function generateDailySchedule() {
            const schedule = [];
            Object.keys(timeRanges).forEach(period => {
                const { hour, minute } = getRandomTime(timeRanges[period].start, timeRanges[period].end);
                schedule.push({
                    period,
                    hour,
                    minute,
                    question: getRandomQuestion(period),
                    time: `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`
                });
            });
            return schedule.sort((a, b) => (a.hour * 60 + a.minute) - (b.hour * 60 + b.minute));
        }

        function getPeriodIcon(period) {
            const icons = {
                morning: '<svg class="w-6 h-6 text-amber-500" fill="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><path d="M12 1v6m0 6v6m8.66-11.66l-4.24 4.24M7.58 7.58L3.34 3.34m0 17.32l4.24-4.24m9.08 0l4.24 4.24M23 12h-6m-6 0H1"/></svg>',
                midday: '<svg class="w-6 h-6 text-orange-500" fill="currentColor" viewBox="0 0 24 24"><path d="M2 21h18v-2H2m9-15h2v3h-2m4 13l1.5 1.5 2.1-2.1-1.5-1.5M1.8 10h3v2h-3m15.2 0h3v2h-3m-10 6h2v3h-2M8.5 6.6L7 5.1 4.9 7.2l1.5 1.5M20.1 17l-2.1 2.1 1.5 1.5 2.1-2.1M15 8c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5z"/></svg>',
                afternoon: '<svg class="w-6 h-6 text-rose-500" fill="currentColor" viewBox="0 0 24 24"><path d="M3 12h18M3 6h18M3 18h18"/></svg>',
                night: '<svg class="w-6 h-6 text-indigo-500" fill="currentColor" viewBox="0 0 24 24"><path d="M17.75 4.09L15.22 6.03L16.13 9.09L13.5 7.28L10.87 9.09L11.78 6.03L9.25 4.09L12.44 4L13.5 1L14.56 4L17.75 4.09M21.25 11L19.61 12.25L20.2 14.23L18.5 13.06L16.8 14.23L17.39 12.25L15.75 11L17.81 10.95L18.5 9L19.19 10.95L21.25 11M18.97 15.95C19.8 15.87 20.69 17.05 20.16 17.8C19.84 18.25 19.5 18.67 19.08 19.07C15.17 23 8.84 23 4.94 19.07C1.03 15.17 1.03 8.83 4.94 4.93C5.34 4.53 5.76 4.17 6.21 3.85C6.96 3.32 8.14 4.21 8.06 5.04C7.79 7.9 8.75 10.87 10.95 13.06C13.14 15.26 16.1 16.22 18.97 15.95M17.33 17.97C14.5 17.81 11.7 16.64 9.53 14.5C7.36 12.31 6.2 9.5 6.04 6.68C3.23 9.82 3.34 14.64 6.35 17.66C9.37 20.67 14.19 20.78 17.33 17.97Z"/></svg>'
            };
            return icons[period];
        }

        function getPeriodName(period) {
            const names = {
                morning: 'MaÃ±ana',
                midday: 'MediodÃ­a',
                afternoon: 'Tarde',
                night: 'Noche'
            };
            return names[period];
        }

        function formatTime12h(time) {
            const [hour, minute] = time.split(':');
            const h = parseInt(hour);
            const period = h >= 12 ? 'PM' : 'AM';
            const hour12 = h > 12 ? h - 12 : h === 0 ? 12 : h;
            return `${hour12}:${minute} ${period}`;
        }

        function displaySchedule() {
            const scheduleList = document.getElementById('scheduleList');
            scheduleList.innerHTML = '';
            
            dailySchedule.forEach(item => {
                const div = document.createElement('div');
                div.className = 'flex items-start gap-3 p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl';
                div.innerHTML = `
                    <div class="mt-1">${getPeriodIcon(item.period)}</div>
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="font-semibold text-sm text-gray-700">${getPeriodName(item.period)}</span>
                            <span class="text-xs text-gray-500">â€¢</span>
                            <span class="text-sm text-purple-600 font-medium">${formatTime12h(item.time)}</span>
                        </div>
                        <p class="text-sm text-gray-600">${item.question}</p>
                    </div>
                `;
                scheduleList.appendChild(div);
            });
        }

        function showNotification(question) {
            document.getElementById('currentQuestion').textContent = question;
            document.getElementById('questionSection').classList.remove('hidden');
            
            if (notificationsEnabled && 'Notification' in window && Notification.permission === 'granted') {
                new Notification('Momento de ReflexiÃ³n ðŸŒŸ', {
                    body: question,
                    icon: 'ðŸ§˜'
                });
            }
        }

        async function activateNotifications() {
            if ('Notification' in window) {
                const permission = await Notification.requestPermission();
                if (permission === 'granted') {
                    notificationsEnabled = true;
                    dailySchedule = generateDailySchedule();
                    
                    document.getElementById('enableSection').classList.add('hidden');
                    document.getElementById('scheduleSection').classList.remove('hidden');
                    document.getElementById('testSection').classList.remove('hidden');
                    
                    displaySchedule();
                    scheduleNotifications();
                }
            } else {
                alert('Tu navegador no soporta notificaciones. Para usar esta app en tu celular, guÃ¡rdala en tu pantalla de inicio.');
            }
        }

        function scheduleNotifications() {
            const now = new Date();
            dailySchedule.forEach(item => {
                const notifTime = new Date();
                notifTime.setHours(item.hour, item.minute, 0, 0);
                
                if (notifTime > now) {
                    const delay = notifTime - now;
                    setTimeout(() => showNotification(item.question), delay);
                }
            });
        }

        function testNotification() {
            const randomQuestion = getRandomQuestion('morning');
            showNotification(randomQuestion);
        }

        // Initialize
        window.addEventListener('load', () => {
            dailySchedule = generateDailySchedule();
        });
    </script>
</body>
</html>
